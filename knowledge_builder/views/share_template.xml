<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="share_page" name="Knowledge Share Page">
        <html>
            <head>
                <title><t t-esc="data['title']"/> - Knowledge Builder</title>
                <style>
                    * { box-sizing: border-box; margin: 0; padding: 0; }
                    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #333; background: #f5f5f5; }
                    .kb-share { max-width: 800px; margin: 32px auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); padding: 40px; }
                    .kb-share-title { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
                    .kb-share-type { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 13px; font-weight: 600; margin-bottom: 16px; background: #cfe2ff; color: #084298; }
                    .kb-share-type.procedure { background: #d1e7dd; color: #0f5132; }
                    .kb-share-type.qa { background: #fff3cd; color: #664d03; }
                    .kb-share-type.solution { background: #f8d7da; color: #842029; }
                    .kb-share-details { font-size: 15px; color: #555; line-height: 1.6; margin-bottom: 32px; padding-bottom: 16px; border-bottom: 2px solid #eee; }
                    .kb-share-step { margin-bottom: 24px; padding: 20px; border: 1px solid #eee; border-radius: 8px; background: #fafafa; }
                    .kb-share-step-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
                    .kb-share-step-num { display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 50%; background: #714B67; color: #fff; font-weight: 700; font-size: 14px; }
                    .kb-share-step-title { font-size: 18px; font-weight: 600; }
                    .kb-share-step-text { font-size: 14px; color: #555; line-height: 1.6; margin-bottom: 12px; }
                    .kb-share-step-image { max-width: 100%; border-radius: 6px; border: 1px solid #dee2e6; }
                    .kb-share-footer { text-align: center; color: #999; font-size: 12px; margin-top: 32px; padding-top: 16px; border-top: 1px solid #eee; }
                    @media print { body { background: #fff; } .kb-share { box-shadow: none; margin: 0; padding: 20px; } }
                </style>
            </head>
            <body>
                <div class="kb-share">
                    <div class="kb-share-title"><t t-esc="data['title']"/></div>
                    <div t-attf-class="kb-share-type #{data['knowledge_type']}">
                        <t t-esc="data['knowledge_type']"/>
                    </div>
                    <t t-if="data.get('details')">
                        <div class="kb-share-details"><t t-out="data['details']"/></div>
                    </t>
                    <t t-foreach="data.get('steps', [])" t-as="step">
                        <div class="kb-share-step">
                            <div class="kb-share-step-header">
                                <div class="kb-share-step-num"><t t-esc="step_index + 1"/></div>
                                <div class="kb-share-step-title"><t t-esc="step['name']"/></div>
                            </div>
                            <t t-if="step.get('text')">
                                <div class="kb-share-step-text"><t t-out="step['text']"/></div>
                            </t>
                            <t t-if="step.get('image')">
                                <img class="kb-share-step-image"
                                     t-attf-src="data:image/png;base64,#{step['image']}"/>
                            </t>
                        </div>
                    </t>
                    <div class="kb-share-footer">
                        Powered by Knowledge Builder
                    </div>
                </div>
            </body>
        </html>
    </template>
</odoo>
